---
const menu = ["Perfil", "Proyecto", "Contacto"];
---

<nav>
  <ul class="flex [&>li>a]:">
    {
      menu.map((item) => {
        return (
          <li>
            <a
              href={`/${item.toLowerCase()}`}
              class="inline-block px-4 py-2 font-semibold text-five hover:text-one"
            >
              {item}
            </a>
          </li>
        );
      })
    }
  </ul>
</nav>

<div
  id="menu-backdrop"
  class={`absolute bg-five backdrop-blur-lg rounded
	translate-x-[var(--left)] translate-y-[var(--top)]
	left-0 top-0 
	w-[var(--width)] h-[var(--height)]
	transition-all duration-100 
	ease-in-out opacity-0 -z-10
	`}
>
</div>

<script>
  const $listItem = document.querySelectorAll(".header li");
  const $menuBackDrop = document.querySelector("#menu-backdrop") as HTMLElement;

  $listItem.forEach((item) => {
    item.addEventListener("mouseenter", () => {
      const { left, top, width, height } = item.getBoundingClientRect();

      $menuBackDrop.style.setProperty("--left", `${left}px`);
      $menuBackDrop.style.setProperty("--top", `${top}px`);
      $menuBackDrop.style.setProperty("--width", `${width}px`);
      $menuBackDrop.style.setProperty("--height", `${height}px`);
      $menuBackDrop.style.opacity = "1";
      $menuBackDrop.style.visibility = "visible";
    });

    item.addEventListener("mouseleave", () => {
      $menuBackDrop.style.opacity = "1";
      $menuBackDrop.style.visibility = "hidden";
    });
  });
</script>
